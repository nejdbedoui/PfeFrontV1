<div>
    <nb-checkbox status="success" [(ngModel)]="hasAdminAcces">Accès Administrateur</nb-checkbox>
</div>
<hr>
<div class="row">
    <div class="col-md-2">
        <nb-checkbox status="success" [(ngModel)]="hasAccesPointVente">Accès Point de vente</nb-checkbox>
    </div>
    <div class="col-md-3" *ngIf="hasAccesPointVente">
        <nb-select (selectedChange)="changePvt($event)" status="primary" style="width:100%">
            <nb-option *ngFor="let pvt of pvts" [value]="pvt.idPointVente"> {{ pvt.designation }}</nb-option>
        </nb-select>
    </div>
    <div class="col-md-7" *ngIf="hasAccesPointVente">
        <p-table #dt [value]="selectedPvtPermissions" [responsive]="true">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 3rem"></th>
                    <th>Fonctionnalité</th>
                    <th>Type d'acces</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-accessPermission>
                <tr>
                    <td>
                        <nb-checkbox [(ngModel)]="accessPermission.checked" status="success"></nb-checkbox>
                    </td>
                    <td>{{accessPermission.functionName}}</td>
                    <td>
                        <nb-select [(ngModel)]="accessPermission.access" status="success">
                            <nb-option [value]="1"> Accès Total</nb-option>
                            <nb-option [value]="0"> Consultation</nb-option>
                        </nb-select>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-accessPermission>
                <tr>
                    <td></td>
                    <td [attr.colspan]="2">
                        <div style="display: flex;
                        justify-content: center;">
                            La liste est vide
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
<hr>
<div class="row">
    <div class="col-md-2">
        <nb-checkbox status="success" [(ngModel)]="hasAccesSettings">Accès au Paramètrage</nb-checkbox>
    </div>
    <div class="col-md-7" *ngIf="hasAccesSettings">
        <p-table [value]="settingsAccesPermissions" [responsive]="true">
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 3rem"></th>
                    <th>Fonctionnalité</th>
                    <th>Type d'accès</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-accessPermission>
                <tr>
                    <td>
                        <nb-checkbox [(ngModel)]="accessPermission.checked" status="success"></nb-checkbox>
                    </td>
                    <td>{{accessPermission.functionName}}</td>
                    <td>
                        <nb-select [(ngModel)]="accessPermission.access" status="success">
                            <nb-option [value]="1"> Accès Total</nb-option>
                            <nb-option [value]="0"> Consultation</nb-option>
                        </nb-select>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-accessPermission>
                <tr>
                    <td></td>
                    <td [attr.colspan]="2">
                        <div style="display: flex;
                        justify-content: center;">
                            La liste est vide
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<div class="row">
    <div class="col-6">
        <button (click)="returntolist()" nbButton type="reset" status="danger"
            style="float: left ;background: #ff3d71; margin-top: 15px; " [shape]="'round'">Annuler</button>
    </div>
    <div class="col-6">
        <button type="submit" (click)="onSubmit()" nbButton status="success" class="button-style" style="float: right;"
            [shape]="'round'">Enregistrer</button>
    </div>
</div>